<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>O mu Bu mu? - Türk Rock (32) — Layout Fixed</title>
<style>
:root{--bg:#0b0b0f;--fg:#f7f7fb;--muted:#b8b8c7;--accent:#ffcc00;--card:#14141c}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:#000;color:var(--fg);font:14px system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;min-height:100vh}
.app{width:min(1200px,96vw);height:min(760px,94vh);margin:3vh auto;background:#0a0a10cc;border:1px solid #222433;
     border-radius:18px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 10px 50px rgba(0,0,0,.6)}
header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #1c1e2e;gap:10px}
header img{height:90px;object-fit:contain}
main{flex:1;display:grid;grid-template-rows:auto 1fr auto;gap:12px;padding:12px;min-height:0}
.status{display:flex;align-items:center;justify-content:space-between;gap:12px}
.round{font-weight:800}
.desc{color:var(--muted);font-size:12px}
.progress{height:8px;background:#141424;border:1px solid #232343;border-radius:999px;overflow:hidden;min-width:220px}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#ffd84d,#ffb300)}
.match{display:grid;grid-template-columns:1fr 40px 1fr;align-items:stretch;gap:14px;min-height:0}
.vs{display:grid;place-items:center;color:#aaa;font-weight:800}
.card{display:grid;grid-template-rows:1fr auto;background:var(--card);border-radius:14px;overflow:hidden;border:2px solid transparent;cursor:pointer;
      transition:border .2s,transform .2s}
.card:hover{transform:translateY(-2px)}
.card.selected{border-color:var(--accent)}
.thumb{width:100%;min-height:280px; /* daha dengeli görünüm için */ background:#0f1018 center/cover no-repeat;position:relative}
.thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}
.fallback{position:absolute;inset:0;display:grid;place-items:center;color:#9aa;
          background:repeating-linear-gradient(45deg,#141625,#141625 12px,#0f1120 12px,#0f1120 24px)}
.label{padding:10px;text-align:center;border-top:1px solid #1b1d2c;font-weight:700;background:#151624}
.controls{display:flex;gap:8px;justify-content:flex-end}
.btn{background:#2a2a3a;color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}
.btn.primary{background:var(--accent);color:#000;font-weight:800}
/* Intro overlay */
.intro{position:absolute;inset:0;background:#000a;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;text-align:center;padding:16px}
.intro.hidden{display:none}
.hero{width:min(920px,92%);height:300px;background:#0b0b12 url('images/resim_0.jpg') center/contain no-repeat;border:1px solid #23233a;border-radius:14px}
/* Winner */
.winner{position:absolute;inset:0;display:none;place-items:center;background:radial-gradient(1200px 600px at 50% -10%,#ffcc0029,transparent 60%),#000c}
.winner.visible{display:grid}
.win-card{width:min(900px,94%);background:#11131a;border:1px solid #2a2d3f;border-radius:16px;overflow:hidden}
.win-hero{height:360px;background:#0e0f16 center/cover no-repeat;display:flex;align-items:center;justify-content:center;color:#9aa}
.win-body{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px;flex-wrap:wrap}
</style>
</head>
<body>
<div class="app">
  <header>
    <img src="images/logo.png" alt="AltDünya" onerror="this.style.display='none'">
    <div>
      <div style="font-weight:800">O mu Bu mu? — En İyi Türk Rock Sanatçı/Grup</div>
      <div style="color:#b8b8c7;font-size:12px">Görseller /images (resim_1.jpg … resim_32.jpg)</div>
    </div>
    <img src="images/O Mu Bu Mu.png" alt="O Mu Bu Mu" onerror="this.style.display='none'">
  </header>

  <div class="intro" id="intro">
    <div class="hero"></div>
    <div style="font-size:18px;font-weight:800">32 isim → 16 → 8 → 4 → 2 → <b>Şampiyon</b></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center">
      <button class="btn" id="howBtn" type="button">Kurallar</button>
      <button class="btn primary" id="startBtn" type="button">Turnuvayı Başlat</button>
    </div>
  </div>

  <main>
    <div class="status">
      <div>
        <div id="roundTitle" class="round">Turnuva beklemede</div>
        <div id="roundDesc" class="desc">Başlat düğmesine basın</div>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>
    </div>

    <div class="match" id="match"></div>

    <div class="controls">
      <button class="btn" id="backBtn" disabled>Önceki</button>
      <button class="btn" id="resetBtn" disabled>Seçimi Temizle</button>
      <button class="btn primary" id="nextBtn" disabled>Sonraki</button>
    </div>
  </main>

  <div class="winner" id="winner">
    <div class="win-card">
      <div class="win-hero" id="winHero"><span>Görsel yok</span></div>
      <div class="win-body">
        <div id="winTitle" style="font-weight:800">Şampiyon</div>
        <div style="display:flex;gap:8px">
          <button class="btn" id="replayBtn" type="button">Baştan Oyna</button>
          <button class="btn primary" id="closeWinnerBtn" type="button">Kapat</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const NAMES = ["Duman","Mor ve Ötesi","maNga","Athena","Teoman","Hayko Cepkin","MFÖ","Kargo",
"Bulutsuzluk Özlemi","Cem Karaca","Kurtalan Ekspres","Fikret Kızılok","Pentagram","Emre Aydın",
"Şebnem Ferah","Özlem Tekin","Haluk Levent","Erkin Koray","Model","Bülent Ortaçgil",
"Pamela","Pinhani","Ogün Şanlısoy","Can Bonomo","Ezgi’nin Günlüğü","Yeni Türkü",
"Düş Sokağı Sakinleri","Aylin Aslım","Vega","Kurban","Flört","Yüksek Sadakat"];
const ITEMS = NAMES.map((name,i)=>({name, img:`resim_${i+1}.jpg`}));

const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
const shuffle=a=>a.map(v=>[Math.random(),v]).sort((x,y)=>x[0]-y[0]).map(x=>x[1]);
const chunkPairs=list=>{const out=[];for(let i=0;i<list.length;i+=2) out.push([list[i],list[i+1]]);return out;};

let roundIndex=-1, rounds=[], pairIndex=0, selections={}, currentPair=null, history=[];

function roundLabel(i){return["1. Tur (32)","2. Tur (16)","Çeyrek Final","Yarı Final","Final"][i]||"Tur"}
function updateHeader(){
  if(roundIndex<0){$('#roundTitle').textContent='Turnuva beklemede';$('#roundDesc').textContent='Başlat düğmesine basın';$('#bar').style.width='0%';return;}
  const pairs=rounds[roundIndex].length;
  $('#roundTitle').textContent=roundLabel(roundIndex);
  $('#roundDesc').textContent=`${pairs*2} isim → ${pairs} eşleşme`;
  $('#bar').style.width=(pairIndex/pairs)*100+'%';
}
function cardTemplate(item,side){
  const key=`r${roundIndex}-p${pairIndex}`,sel=selections[key]?.name===item.name;
  return `<div class="card ${sel?'selected':''}" data-side="${side}">
    <div class="thumb">
      <img src="images/${item.img}" alt="${item.name}" onerror="this.replaceWith(Object.assign(document.createElement('div'),{className:'fallback',textContent:'Görsel bulunamadı'}))">
    </div>
    <div class="label">${item.name}</div>
  </div>`;
}
function renderMatch(){
  const pair=rounds[roundIndex][pairIndex]; currentPair=pair;
  $('#match').innerHTML = `${cardTemplate(pair[0],'A')}<div class="vs">VS</div>${cardTemplate(pair[1],'B')}`;
  $$('#match .card').forEach(c=>c.onclick=()=>select(c.dataset.side));
  $('#nextBtn').disabled=!selections[`r${roundIndex}-p${pairIndex}`];
  $('#resetBtn').disabled=!selections[`r${roundIndex}-p${pairIndex}`];
  $('#backBtn').disabled=history.length===0;
}
function render(){updateHeader();renderMatch();}
function select(side){
  const key=`r${roundIndex}-p${pairIndex}`;
  selections[key]= side==='A'? currentPair[0] : currentPair[1];
  renderMatch();
}
function clearSelection(){ delete selections[`r${roundIndex}-p${pairIndex}`]; renderMatch(); }
function next(){
  const key=`r${roundIndex}-p${pairIndex}`; const totalPairs=rounds[roundIndex].length;
  if(!selections[key]) return;
  history.push({roundIndex,pairIndex});
  pairIndex++;
  if(pairIndex>=totalPairs){
    const winners=[]; for(let i=0;i<totalPairs;i++) winners.push(selections[`r${roundIndex}-p${i}`]);
    if(winners.length===1) return showWinner(winners[0]);
    rounds.push(chunkPairs(shuffle(winners))); roundIndex++; pairIndex=0;
  }
  render();
}
function back(){ if(!history.length) return; const prev=history.pop(); roundIndex=prev.roundIndex; pairIndex=prev.pairIndex; render(); }
function showWinner(item){
  $('#winTitle').textContent=`Şampiyon: ${item.name}`; const hero=$('#winHero'); hero.style.backgroundImage=`url('images/${item.img}')`; hero.textContent='';
  $('#winner').classList.add('visible'); $('#bar').style.width='100%';
}
function startTournament(){
  $('#intro').classList.add('hidden');
  const shuffled = shuffle([...ITEMS]);
  rounds = [chunkPairs(shuffle(shuffled))];
  roundIndex=0; pairIndex=0; selections={}; history=[]; render();
  $('#nextBtn').disabled=true; $('#resetBtn').disabled=true; $('#backBtn').disabled=true;
}
$('#startBtn').addEventListener('click', startTournament);
$('#howBtn').addEventListener('click', ()=>alert('Kurallar:\n• Her eşleşmede bir isim seç.\n• Kazanan bir sonraki tura geçer.\n• 32 → 16 → 8 → 4 → 2 → Şampiyon.'));
$('#nextBtn').addEventListener('click', next);
$('#backBtn').addEventListener('click', back);
$('#resetBtn').addEventListener('click', clearSelection);
$('#replayBtn')?.addEventListener('click', ()=>location.reload());
$('#closeWinnerBtn')?.addEventListener('click', ()=>$('#winner').classList.remove('visible'));
</script>
</body>
</html>
